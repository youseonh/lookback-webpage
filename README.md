---
### â­ ë°ëª¨

https://lookbackweb.netlify.app/
---

### â­ êµ¬í˜„ ê¸°ëŠ¥ ê´€ë ¨

- ê¸°ëŠ¥ To Do ê´€ë¦¬ â‡’ Git issue
- ê¸°ëŠ¥
  | ìš”êµ¬ ì‚¬í•­ | êµ¬í˜„ ì •ë„ | ì„¸ë¶€ ê¸°ëŠ¥ | ì”ì¡´ ì˜¤ë¥˜ | ë¹„ê³  |
  | --------- | --------- | ---------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | ëª©ë¡ ì¡°íšŒ | 100% | ë“±ë¡ëœ ê´€ì‹¬ ì‚¬ì´íŠ¸ì˜ ëª©ë¡ì„ í™•ì¸ | | ê¸°ì¡´ì— localStorageë¥¼ ì‚¬ìš©í•˜ëŠ” hook ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë‹¤ê°€ ì‚­ì œ ê¸°ëŠ¥ í›„ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•´ Recoilì„ ë„ì…í•˜ì˜€ê³  Recoil effectë¥¼ ì‚¬ìš©í•˜ì—¬ localStorageì™€ ë™ê¸°í™”í–ˆìŠµë‹ˆë‹¤. |
  | ìƒì„¸ | 90% | 1ì›” 1ì¼ ê¸°ì¤€ìœ¼ë¡œ 10ë…„ì¹˜ ê³¼ê±° URL ì£¼ì†Œ í™•ì¸ / ê° ë¦¬ìŠ¤íŠ¸ì— URLê³¼ ë‚ ì§œ í•„ìˆ˜ í‘œì‹œ / URL í´ë¦­ ì‹œ ê³¼ê±° URL í˜ì´ì§€ ì´ë™ | í˜ì´ì§• Max ê³„ì‚° í›„ í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ ê³„ì‚° ì˜¤ë¥˜ë¡œ ë¹ˆ í…Œì´ë¸” ì¡°íšŒë˜ëŠ” ì´ìŠˆ ì¡´ì¬í•¨ | Reqct-Query ê³¼ Axios ì‚¬ìš©í•œ url 10ë…„ì¹˜ ìƒì„¸ API ì¡°íšŒ |
  | ìƒì„± | 100% | ì¸í’‹ ë°•ìŠ¤ë¡œ ê´€ì‹¬ìˆëŠ” URL ì…ë ¥í•´ì„œ ë“±ë¡ / ë“±ë¡ ê°œìˆ˜ 4ê°œ ì œí•œ / 4ê°œ ì´ˆê³¼ ë“±ë¡ ì‹œ ì•Œë¦¼ / ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© / ìœ íš¨ì„± ê²€ì¦ | | |
  | ì‚­ì œ | 100% | ì‚­ì œ ì•Œë¦¼ì°½ í™•ì¸ í›„ ì‚­ì œ | | ëª©ë¡ ì¡°íšŒì™€ ë™ì¼ |

---

### â­ ì¶”ê°€ êµ¬í˜„ í•„ìš” ê¸°ëŠ¥

1. ìˆ˜ì •
   - ì´ìœ  = ì´ë¯¸ ë“±ë¡í•œ url ì •ë³´ë¥¼ ìˆ˜ì •í•  í•„ìš”ê°€ ìˆìŒ
2. ê´€ì‹¬ urlì˜ ogíƒœê·¸ image urlì„ ê°€ì ¸ì™€ì„œ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥

   - êµ¬í˜„ ì •ë„ â‡’ 50%
   - í•„ìš”í•œ ì´ìœ  = urlì„ ì¡°íšŒ í•  ë•Œ í•´ë‹¹ urlì˜ ogíƒœê·¸ë¥¼ ê°€ì ¸ì™€ì„œ imageë¥¼ ë³´ì—¬ì£¼ë©´ ì–´ë–¤ urlì¸ì§€ í•œëˆˆì— íŒŒì•…í•˜ê¸° ì‰¬ì›€
   - ë°œìƒ ì´ìŠˆ â‡’ ê´€ì‹¬ urlì˜ documentë¥¼ ì½ì–´ ë“¤ì¸ í›„ ì •ê·œì‹ì„ í†µí•´ og:imageì˜ url ì¶”ì¶œ í›„ ì´ë¯¸ì§€ ìƒì„±í•˜ë ¤ í–ˆìœ¼ë‚˜ ì¼ë¶€ urlì˜ ì´ë¯¸ì§€ë¥¼ ì½ì–´ë“¤ì´ì§€ ëª»í•¨

     - OG íƒœê·¸ ì •ê·œ í‘œí˜„ì‹ ê´€ë ¨
       - ogíƒœê·¸ ì´ë¯¸ì§€ url ê°€ì ¸ì˜¤ê¸°
         ![image](https://github.com/youseonh/lookback-webpage/assets/72364918/d39b3c99-b81c-4cf8-821d-8f962e9771df)

     ```jsx
     // 1. í•´ë‹¹ urlì˜ ì •ë³´ë¥¼ useQueryë¥¼ í†µí•´ ê°€ì ¸ì˜´
     const ogQuery = useGetOpenGraph(props.url);

     // 2. <meta property="og:image" content="(.+?)">/ => ì •ê·œì‹ì„ í†µí•´ og:imageì˜ url ì¶”ì¶œ í›„ ì´ë¯¸ì§€ ìƒì„±
     const getOgImage = () => {
       if (ogQuery.data) {
         const content = ogQuery.data.match(/<meta property="og:image" content="(.+?)">/);
         if (content.length >= 2) {
           setOGImage(content[1]);
         }
         if (ogImage) {
           return <img alt={ogImage} src={ogImage} width={300} />;
         }
       }
     };
     ```

---

### â­ìŠ¤í‚¬

| ì´ë¦„              | ë²„ì „    |
| ----------------- | ------- |
| React             | 18.2.0  |
| Typescript        | 5.0.4   |
| Next              | 13.4.3  |
| Recoil            | 0.7.7   |
| React-Query       | ^3.39.3 |
| Axios             | 1.4.0   |
| Styled-components | ^5.1.26 |
| Ant-Design        | ^5.5.1  |
| eslint            | ^8.41.0 |
| prettier          | ^2.8.8  |

---

### â­ ë¡œì»¬ ì‹¤í–‰ ë°©ë²•

1. npm version
   - npm ^9.6.4
2. git Clone

   ```bash
   git clone https://github.com/youseonh/lookback-webpage.git
   ```

3. npm install

   ```bash
   npm i
   ```

4. npm install

   ```bash
   npm run dev
   ```

5. open

   ```bash
   http://localhost:3000
   ```

---

### â­ í”„ë¡œì íŠ¸ í™˜ê²½ êµ¬ì„± ë°©ë²•

1. create-next-appì„ í™œìš©í•œ ê¸°ë³¸ êµ¬ì¡° êµ¬ì¶•

   ```bash
   npx create-next-app --typescript
   ```

2. eslint ì™€ prettier

   ```bash
   npm add prettier eslint eslint-config-prettier eslint-plugin-import eslint-plugin-react eslint-plugin-react-hooks eslint-import-resolver-typescript @typescript-eslint/eslint-plugin @typescript-eslint/parser -D
   ```

3. antd UI í”„ë ˆì„ì›Œí¬ ì„¤ì¹˜

   ```bash
   npm i antd @types/antd
   ```

- styled-component, styled-reset

  - ì„¤ì¹˜
    ```bash
    npm i --save-dev @types/styled-components
    npm add styled-reset
    ```
  - `styled-reset`
      <aside>
      ğŸ“Œ ë¸Œë¼ìš°ì €ë§ˆë‹¤ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ìŠ¤íƒ€ì¼ì„ ì§€ì›Œì£¼ëŠ” Node.js íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. ì¦‰, ê¸°ë³¸ ì œê³µ ìŠ¤íƒ€ì¼ì„ ì´ˆê¸°í™”ì‹œì¼œ í˜¸í™˜ì„±ì„ ë§ì¶¥ë‹ˆë‹¤. styled-resetì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì´ ìˆìŠµë‹ˆë‹¤.
      
      - ë¸Œë¼ìš°ì €ë§ˆë‹¤ ë‹¤ë¥¸ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - ì½”ë“œê°€ ë” ê¹”ë”í•˜ê³  ì¼ê´€ë˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.
      - ê°œë°œ ì‹œê°„ì„ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </aside>

- React Query
  ê°€ì¥ ì‚¬ìš©ë¥ ì´ ë†’ê³ , ì„¸ë¶„í™”ë˜ê³  ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ë³´ì—¬ ì„ íƒí–ˆë‹¤.

  - ì°¸ê³ 

    1. ë¹„êµ

       [Comparison | React Query vs SWR vs Apollo vs RTK Query vs React Router | TanStack Query Docs](https://tanstack.com/query/v4/docs/react/comparison)

    2. ì¹´ì¹´ì˜¤ ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ê²½í—˜ ê³µìœ  ë™ì˜ìƒ

       [ëˆˆì— ë³´ì´ì§€ ì•ŠëŠ” ê°œì„ : Myêµ¬ë…ì˜ Reduxì—ì„œ React-Query ì „í™˜ ê²½í—˜ ê³µìœ  / if(kakao)2022](https://www.youtube.com/watch?v=YTDopBR-7Ac)

    3. Develogger ì‚¬ë‚´ ë„ì…

       [https://develogger.kro.kr/blog/LKHcoding/153#2-6 orval.config.ts](https://develogger.kro.kr/blog/LKHcoding/153#2-6%20orval.config.ts)

  - `axios`ì™€ `react-query` ì„¤ì¹˜
    ```bash
    npm install axios react-query
    ```

- Netlify ë°°í¬

  - í”„ë¡œì íŠ¸ root ë””ë ‰í† ë¦¬ì— netlify.toml íŒŒì¼ ìƒì„± (ì•ˆì— ì£¼ì„ ë„£ìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒí•¨)

    ```bash
    [build]
      command = "npm run build"
      publish = ".next"

    [[plugins]]
      package = "@netlify/plugin-nextjs"
    ```

---

### â­ íŠ¸ëŸ¬ë¸” ìŠˆíŒ… ê´€ë¡

1. \***\*Warning: Expected server HTML to contain a matching <div> in <div>.\*\***

   - ì›ì¸
     - ì²« ë²ˆì§¸ ë Œë”ë§ì´ ì„œë²„ì˜ ì´ˆê¸° ë Œë”ì™€ ì¼ì¹˜í•´ì•¼í•˜ê¸° ë•Œë¬¸ì—, ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì‹¤í–‰ë˜ì–´ì•¼í•˜ëŠ” ì½”ë“œëŠ” useEffect ì½”ë“œ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤. window ê°ì²´ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë¸Œë¼ìš°ì €ì˜ ìš”ì†Œë“¤ê³¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ë“¤ì„ ë‹´ê³  ìˆëŠ” ê°ì²´ì´ê¸° ë•Œë¬¸ì— useEffect ì½”ë“œ ë‚´ë¶€ì— ì¡´ì¬í•˜ê±°ë‚˜ @next/dynamicì„ í†µí•œ lazy loadingì„ ì´ìš©í•˜ëŠ” í•´ê²°í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
   - í•´ê²° ë°©ì•ˆ

     - useEffectë¡œ ê°ì‹¸ì„œ ì‚¬ìš©

       ```jsx
       const [arr, setArr] = useState<ReactNode[]>([]);

       useEffect(() => {
           const newArr = [];
           for (let i = 0; i < 4; i++) {
             if (storedValue[i]) {
               newArr.push(<CustomCard key={i} {...storedValue[i]} />);
             } else {
               newArr.push(<CustomCard key={i} name="" url="" />);
             }
           }
           setArr(newArr);
         }, [storedValue]);
       ```

   - ì°¸ê³ 
     [Warning: Expected server HTML to contain a matching <div> in <div>. Â· vercel/next.js Â· Discussion #17443](https://github.com/vercel/next.js/discussions/17443)
     [[Next.js] window is not defined ì›ì¸ ë° í•´ê²°ë°©ë²•](https://handhand.tistory.com/272)

2. **XMLHttpRequest at 'http://web.archive.org/cdx/search/cdx?url=https://www.google.com&date_range=2013-01-01:2023-01-01' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource.**

   - ì›ì¸
     - CORSì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ë° Proxy ì„¤ì •ì„ í•˜ì§€ ì•Šì•˜ë‹¤.. ì–¼ë§ˆ ì „ì—ë„ Vue3 í”„ë¡œì íŠ¸ ì„¤ì •í•˜ë©´ì„œ ë˜‘ê°™ì€ ì‹¤ìˆ˜ë¥¼ í•´ ë†“ê³  ì´ë²ˆì— ë˜‘ê°™ì€ ì‹¤ìˆ˜ë¥¼ ë°˜ë³µí•˜ê³  ì‹œê°„ì„ ë‚ ë ¸ë‹¤.. ê´œí•œ API ACCESS KEY ì™€ SECRET KEYë§Œ ì°¾ì•„ë³´ëŠë¼ ë°˜ë‚˜ì ˆì„ í—ˆë¹„í•¨
   - í•´ê²° ë°©ì•ˆ

     - next.config.js íŒŒì¼ ìˆ˜ì •
     - /apië¡œ ì˜¤ëŠ” ìš”ì²­ì€ https://web.archive.orgë¡œ ë°”ê¾¸ê¸°

       ```jsx
       /** @type {import('next').NextConfig} */
       const nextConfig = {
         reactStrictMode: true,
         async rewrites() {
           return [
             {
               source: "/api/:path*",
               destination: `https://web.archive.org/:path*`,
             },
           ];
         },
       };

       module.exports = nextConfig;
       ```

   - ì°¸ê³ 
     [Reactì™€ Next.jsì˜ Cors ì—ëŸ¬ í•´ê²° (Proxy)](https://velog.io/@leehyunho2001/Next.js-Cors-ì—ëŸ¬-í•´ê²°-Proxy)

3. **Error: Objects are not valid as a React child (found: [object Promise]). If you meant to render a collection of children, use an array instead.**

   - ì›ì¸
     - ëª¨ë“  í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” asyncë¡œ ì‹¤í–‰ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ì—ˆë‹¤!
   - í•´ê²° ë°©ì•ˆ

     - async ì‚­ì œ í›„ useEffect ì‚¬ìš©

       ```jsx
       const Detail = () => {
         const useFetchData = async () => {
           return await useGetWayBack("https://www.google.com");
         };
         const data = useFetchData();
         useEffect(() => {
           if (data) {
             console.log(data);
           }
         }, []);

       ... ìƒëµ
       ```

   - ì°¸ê³ 
     [Objects are not valid as a React child (found: [object Promise]) ì—ëŸ¬ ì›ì¸ ë° í•´ê²°](https://velog.io/@lire_eruel/Objects-are-not-valid-as-a-React-child-found-object-Promise-ì—ëŸ¬-ì›ì¸-ë°-í•´ê²°)

---
